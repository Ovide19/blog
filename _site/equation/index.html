<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.19.1 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Hunting digital easter eggs - The Sauerkraut Golem</title>
<meta name="description" content="With the COVID-19 lockdown slightly complicating this year’s easter egg hunt, why not turn to digital easter eggs for fun? ">


  <meta name="author" content="Sheldon Warden">


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="The Sauerkraut Golem">
<meta property="og:title" content="Hunting digital easter eggs">
<meta property="og:url" content="http://localhost:4000/equation/">


  <meta property="og:description" content="With the COVID-19 lockdown slightly complicating this year’s easter egg hunt, why not turn to digital easter eggs for fun? ">



  <meta property="og:image" content="http://localhost:4000/assets/images/equation_overlay.jpg">





  <meta property="article:published_time" content="2020-04-12T00:00:00+02:00">





  

  


<link rel="canonical" href="http://localhost:4000/equation/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Sheldon Warden",
      "url": "http://localhost:4000/"
    
  }
</script>






<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="The Sauerkraut Golem Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--posts">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          The Sauerkraut Golem
          <span class="site-subtitle">A collection of Python recipes</span>
        </a>
        <ul class="visible-links"></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      
  







<div class="page__hero--overlay"
  style=" background-image: linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2)), url('/assets/images/equation_overlay.jpg');"
>
  
    <div class="wrapper">
      <h1 id="page-title" class="page__title" itemprop="headline">
        
          Hunting digital easter eggs

        
      </h1>
      
        <p class="page__lead">With the COVID-19 lockdown slightly complicating this year’s easter egg hunt, why not turn to digital easter eggs for fun?
</p>
      
      
        <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  2 minute read

</p>
      
      
      
    </div>
  
  
</div>





<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="/assets/images/avatar.jpg" alt="Sheldon Warden" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Sheldon Warden</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>Geophysicist by training, data scientist by trade.</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Strasbourg, France</span>
        </li>
      

      
        
          
            <li><a href="mailto:sheldon.warden@protonmail.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Email</span></a></li>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <div class="archive">
    
    <p>With the COVID-19 lockdown slightly complicating this year’s easter egg hunt, why not turn to digital easter eggs for fun?</p>

<p>If you are into electronic music, you probably heard of Aphex Twin’s images hidden into some of the tracks of his 1999 “Windowlicker” album, such as the grinning face buried into the so-called “Equation” track.</p>

<p>In this post, I will show you how you can easily uncover this concealed image with just a few Python lines. In the following, I will assume that you are working under your virtual environment in which numpy and SciPy are installed. Also, if you do not already own a copy of Aphex Twin’s “Equation” track, now is the time to download it and to convert it to the WAV format; just save the file in your working directory. That being said, let’s get started!</p>

<p>First, let’s import <code class="highlighter-rouge">numpy</code>, <code class="highlighter-rouge">pyplot</code> and <code class="highlighter-rouge">wavfile</code>, a SciPy module allowing to read and write WAV files.
Here I also import <code class="highlighter-rouge">gridspec</code>, which will come in handy to create a nice looking plot with multiple subfigures, and <code class="highlighter-rouge">figure</code>, in order to control the figure size:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">from</span> <span class="nn">scipy.io</span> <span class="kn">import</span> <span class="n">wavfile</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">gridspec</span>
<span class="kn">from</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">import</span> <span class="n">figure</span>
</code></pre></div></div>

<p>Given the path to the WAV file of interest, wavfile’s <code class="highlighter-rouge">read</code> function returns its sampling rate and the associated data:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">fs</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">wavfile</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="s">'./Aphex Twin - Strange Formula.wav'</span><span class="p">)</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">fs</code> is given in samples per second, or Hertz. Here fs is equal to 44100Hz, which is the common sampling frequency of mp3 files.</p>

<p><code class="highlighter-rouge">data</code> consists of a numpy array of shape (15379456, 2). Considering the aforementioned sampling rate, 15379456 samples amount to 5 minutes and 48 seconds, which is indeed the duration of the “Equation” track. Typing <code class="highlighter-rouge">data.shape</code> reveals that  <code class="highlighter-rouge">data</code> actually consists of 2 arrays: these correspond to the left and right channels of the stereo recording.</p>

<p>Aphex Twin’s face is said to be hidden towards the end of the track so let’s take advantage of python’s negative indexing to extract the last 30 seconds of the song, considering the first channel only:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">chunk</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="o">-</span><span class="n">fs</span><span class="o">*</span><span class="mi">30</span><span class="p">:,</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div></div>
<p>Now we can plot this chunk of data in both time and frequency domains.
<code class="highlighter-rouge">figure</code> allows us to specify the size of the plot in inches, while <code class="highlighter-rouge">gridspec</code> gives us control over the height ratio between subplots.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">plt</span><span class="p">.</span><span class="n">rcParams</span><span class="p">.</span><span class="n">update</span><span class="p">({</span><span class="s">'font.size'</span><span class="p">:</span> <span class="mi">20</span><span class="p">})</span>
<span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">gs</span> <span class="o">=</span> <span class="n">gridspec</span><span class="p">.</span><span class="n">GridSpec</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">height_ratios</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span> 
<span class="n">ax0</span><span class="o">=</span><span class="n">plt</span><span class="p">.</span><span class="n">subplot</span><span class="p">(</span><span class="n">gs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">ax0</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">arange</span><span class="p">(</span><span class="n">chunk</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">/</span><span class="n">fs</span><span class="p">,</span> <span class="n">chunk</span><span class="p">)</span>
<span class="n">ax0</span><span class="p">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">right</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">=</span><span class="n">plt</span><span class="p">.</span><span class="n">subplot</span><span class="p">(</span><span class="n">gs</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">ax1</span><span class="p">.</span><span class="n">specgram</span><span class="p">(</span><span class="n">chunk</span><span class="p">,</span> <span class="n">NFFT</span><span class="o">=</span><span class="mi">1024</span><span class="p">,</span> <span class="n">Fs</span><span class="o">=</span><span class="n">fs</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s">'terrain'</span><span class="p">)</span>
<span class="n">ax1</span><span class="p">.</span><span class="n">set_yscale</span><span class="p">(</span><span class="s">'symlog'</span><span class="p">)</span>
<span class="n">ax1</span><span class="p">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">'Seconds'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">ax1</span><span class="p">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">'Frequency(Hz)'</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">ax1</span><span class="p">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">right</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="n">ax1</span><span class="p">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span><span class="n">top</span><span class="o">=</span><span class="mi">16000</span><span class="p">)</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">ax0.plot(np.arange(chunk.shape[0])/fs, chunk)</code> takes care of the time domain representation: since I want the abscissa to show the number of <em>seconds</em> rather than the number of <em>samples</em>, I plot the chunk of data against an array of samples normalized by the sampling rate, <em>i.e</em> <code class="highlighter-rouge">np.arange(chunk.shape[0])/fs</code>.</p>

<p>The frequency domain representation is obtained using matplotlib’s <code class="highlighter-rouge">specgram</code> function: <code class="highlighter-rouge">ax1.specgram(chunk, NFFT=1024, Fs=fs, detrend='mean', cmap='terrain')</code>. This function takes several arguments:</p>

<ul>
  <li><code class="highlighter-rouge">NFFT</code>: this is the length of the segments into which the original data are split before being Fourier transformed.</li>
  <li><code class="highlighter-rouge">Fs</code> is the sampling rate; let’s use the actual sampling rate <code class="highlighter-rouge">fs</code> that we recovered using wavfile’s <code class="highlighter-rouge">read</code> function.</li>
</ul>

<p>Last but not least, I am using a log scale for the frequeny axis <code class="highlighter-rouge">ax1.set_yscale('symlog')</code>. Comment out this line, you will see the face distort.</p>

<p><em>Et voilà!</em></p>

<p><img src="/assets/images/equation.png" alt="image-title-here" class="img-responsive" /></p>

<p>Now that you know the basic recipe, check out <a href="https://twistedsifter.com/2013/01/hidden-images-embedded-into-songs-spectrographs/">this webpage</a> for more tracks to explore!</p>



<ul class="taxonomy__index">
  
  
    <li>
      <a href="#2020">
        <strong>2020</strong> <span class="taxonomy__count">2</span>
      </a>
    </li>
  
</ul>



  <section id="2020" class="taxonomy__section">
    <h2 class="archive__subtitle">2020</h2>
    <div class="entries-list">
      
        



<div class="list__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/covid/" rel="permalink">Mapping COVID-19 deaths using Python and Folium
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  less than 1 minute read

</p>
    
    <p class="archive__item-excerpt" itemprop="description">Next you can update your site name, avatar and other options using the _config.yml file in the root of your repository (shown below).
</p>
  </article>
</div>

      
        



<div class="list__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/equation/" rel="permalink">Hunting digital easter eggs
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  2 minute read

</p>
    
    <p class="archive__item-excerpt" itemprop="description">With the COVID-19 lockdown slightly complicating this year’s easter egg hunt, why not turn to digital easter eggs for fun?
</p>
  </article>
</div>

      
    </div>
    <a href="#page-title" class="back-to-top">Back to top &uarr;</a>
  </section>


  </div>
</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2020 Sheldon Warden. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script src="https://kit.fontawesome.com/4eee35f757.js"></script>










  </body>
</html>
